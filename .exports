# Prefer US English and use UTF-8
export LANG="en_US"
export LC_ALL="en_US.UTF-8"
export DEFAULT_USER=kris

# Compilation flags
# export ARCHFLAGS="-arch x86_64"

# ssh
export SSH_KEY_PATH="~/.ssh/id_rsa"

# Donâ€™t clear the screen after quitting a manual page
export MANPAGER="less -X"

# Always enable colored `grep` output
if [[ $(uname) == "Darwin" ]]; then
  export GREP_OPTIONS="--color=auto"
fi

# Highlight section titles in manual pages
export LESS_TERMCAP_md="$ORANGE"

# Set editor
if [[ -n $SSH_CONNECTION ]]; then
  export EDITOR="nano"
else
  export EDITOR="code --wait"
  export VISUAL="code --wait"
fi

if [[ $(uname) == "Darwin" ]]; then
  [ -d /usr/local/opt/coreutils/libexec/gnubin ] && export PATH="/usr/local/opt/coreutils/libexec/gnubin:$PATH"
  [ -f /usr/local/etc/profile.d/autojump.sh ] && . /usr/local/etc/profile.d/autojump.sh
  [ -f /usr/libexec/java_home ] && export JAVA_HOME=$(/usr/libexec/java_home)
  [ -d /usr/local/opt/yarn ] && export PATH="`yarn global bin`:$PATH"
  [ -d ~/Code/go ] && export PATH=~/Code/go/bin:$PATH
  [ -d ~/Code/go ] && export GOPATH=~/Code/go
  [ -d /usr/local/opt/rustup-init ] && export PATH=/usr/local/opt/rustup-init/bin:$PATH
  export BYOBU_PREFIX=/usr/local
  export PATH="/Applications/Visual Studio Code.app/Contents/Resources/app/bin:$PATH"
fi

if [[ $(grep microsoft /proc/version) ]]; then
  ps -ef | grep gpg-agent | grep -v grep > /dev/null || eval $(gpg-agent --daemon)
  export GPG_TTY=$(tty)
  export GPG_AGENT_INFO=`gpgconf --list-dirs agent-socket | tr -d '\n' && echo -n ::`

  if [ -z "$(pgrep ssh-agent)" ]; then
    rm -rf /tmp/ssh-*
    eval $(ssh-agent -s) > /dev/null
  else
    export SSH_AGENT_PID=$(pgrep ssh-agent)
    export SSH_AUTH_SOCK=$(find /tmp/ssh-* -name 'agent.*')
  fi
fi

[[ -a $HOME/.dokku/contrib/dokku_client.sh ]] && export DOKKU_HOST='qa'
